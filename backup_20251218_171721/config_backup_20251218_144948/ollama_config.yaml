# Brain 系统配置 - 使用 Ollama 本地大模型
# 
# 使用前请确保:
# 1. 已安装 Ollama: curl -fsSL https://ollama.ai/install.sh | sh
# 2. 已拉取模型: ollama pull deepseek-r1:latest
# 3. Ollama 正在运行: ollama serve

system:
  name: "Brain-Autonomous-System"
  version: "1.0.0"
  log_level: "INFO"
  max_concurrent_tasks: 10
  heartbeat_interval: 1.0

# LLM配置 - Ollama 本地模型
llm:
  provider: "ollama"
  
  # 模型选择 (根据你拉取的模型修改)
  # 常用选项:
  #   - deepseek-r1:latest (推荐, 强大的推理能力)
  #   - llama3:latest
  #   - qwen2:latest
  #   - mistral:latest
  #   - codellama:latest (适合代码相关)
  model: "deepseek-r1:latest"
  
  # Ollama API 地址 (默认)
  api_base: "http://localhost:11434"
  
  # 生成参数
  max_tokens: 4096
  temperature: 0.1  # 低温度使输出更确定
  
  # 超时设置 (本地模型可能较慢，设置较长超时)
  timeout: 180  # 3分钟
  retry_count: 2
  retry_delay: 2.0

# 感知模块配置
perception:
  update_rate: 10.0
  sensors:
    camera:
      enabled: true
      resolution: [1920, 1080]
      fps: 30
    lidar:
      enabled: true
      range: 100.0
    gps:
      enabled: true
      accuracy: 0.01
    imu:
      enabled: true
      rate: 100

# 平台配置
platforms:
  drone:
    enabled: true
    max_speed: 15.0
    max_altitude: 120.0
    battery_warning: 20
    battery_critical: 10
    safe_distance: 5.0
  ugv:
    enabled: true
    max_speed: 5.0
    battery_warning: 20
    battery_critical: 10
    safe_distance: 2.0
  usv:
    enabled: true
    max_speed: 8.0
    battery_warning: 20
    battery_critical: 10
    safe_distance: 10.0

# 任务规划配置
planning:
  max_retries: 3
  timeout: 300
  checkpoint_interval: 5
  enable_parallel: true
  max_parallel_operations: 3

# 错误恢复配置
recovery:
  enabled: true
  max_rollback_steps: 10
  replan_on_failure: true
  safe_mode_on_critical: true
  error_thresholds:
    warning: 3
    critical: 5

# 通信配置
communication:
  protocol: "zmq"
  command_port: 5555
  telemetry_port: 5556
  heartbeat_timeout: 5.0
  message_queue_size: 1000
  simulation: true  # 模拟模式

# 状态管理配置
state:
  persistence: true
  storage_path: "./data/state"
  checkpoint_path: "./data/checkpoints"
  history_length: 1000

# 安全约束
safety:
  geofence:
    enabled: false
    default_radius: 500.0
  no_fly_zones: []
  emergency_procedures:
    - condition: "battery_critical"
      action: "return_to_home"
    - condition: "communication_lost"
      action: "hover_and_wait"
    - condition: "obstacle_detected"
      action: "stop_and_avoid"


